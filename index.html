<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bayside – Dashboard</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dashboard.css">

  <!-- If you have an existing global style file, include it after this line -->
  <!-- <link rel="stylesheet" href="styles.css"> -->
</head>
<body>

  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script src="firebase-init.js"></script>
  <script src="auth-guard.js"></script>
  
  <!-- Header / App Bar -->
  <header class="appbar">
    <div class="appbar__left">
      <img class="logo" src="logo.png" alt="Bayside Slashing" />
      <h1 class="appbar__title">Dashboard</h1>
    </div>

    <div class="appbar__right">
      <span class="user-pill" id="user-email">user@bayside.local</span>
      <button class="btn btn-outline" id="logoutBtn" type="button">Logout</button>
    </div>
  </header>

  <main class="container">

<section class="section">
  
  <h2 class="section-title">Work areas</h2>

  <div class="cards-row">

    <!-- Parks Mowing -->
    <a href="./ParksMowing.html" class="work-card">
      <div class="work-card__img">
        <img src="MOWING PICTURE.png" alt="Parks Mowing map" />
      </div>
      <div class="work-card__footer">
        <span class="work-card__title">Parks Mowing</span>
        <span class="btn btn-dark">Open</span>
      </div>
    </a>

    <!-- Parks Snipping -->
    <a href="./ParksSnipping.html" class="work-card">
      <div class="work-card__img">
        <img src="SNIPPING PICTURE.png" alt="Parks Snipping map" />
      </div>
      <div class="work-card__footer">
        <span class="work-card__title">Parks Snipping</span>
        <span class="btn btn-dark">Open</span>
      </div>
    </a>

    <!-- Firebreaks -->
    <a href="./Firebreaks.html" class="work-card">
      <div class="work-card__img">
        <img src="FIREBREAKS PICTURE.png" alt="Firebreaks map" />
      </div>
      <div class="work-card__footer">
        <span class="work-card__title">Firebreaks</span>
        <span class="btn btn-dark">Open</span>
      </div>
    </a>

  </div>
</section>


    <!-- Tasks to complete -->
    <section class="section">
      <h2 class="section-title">Tasks to complete</h2>

      <!-- Your existing JS can inject items into this list -->
      <div id="tasks-list" class="tasks">
        <!-- Example task markup for reference (leave commented out)
        <div class="task">
          <div class="task__left">
            <div class="task__title">Zone 1 — Numbers 1–50</div>
            <div class="task__meta">Assigned · Due 15 Oct</div>
          </div>
          <div class="task__right">
            <span class="badge badge-amber">Assigned</span>
          </div>
        </div>
        -->
      </div>
    </section>

  </main>

  <footer class="footer-space"></footer>

 <script>
  (function() {
    // Define a reusable logout helper (so other pages can also call window.logout)
    window.logout = async function(){
      try {
        await firebase.auth().signOut();
      } catch (e) {
        console.warn('signOut failed (will still redirect):', e);
      }
      // Clear any stored "next" target so auth-guard doesn't bounce you back
      try {
        sessionStorage.removeItem('bayside_next');
        localStorage.removeItem('bayside_next');
      } catch (_) {}

      // Use replace() so the back button doesn't return to a protected page
      location.replace('./login.html');
    };

    // Fill the email pill if your login code stores it (unchanged)
    try {
      const emailEl = document.getElementById('user-email');
      const stored = localStorage.getItem('bayside:userEmail');
      if (stored && emailEl) emailEl.textContent = stored;
    } catch (e) {}

    // Wire up logout to the button
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', function(){
        window.logout(); // sign out first, then redirect
      });
    }
  })();
</script>
</body>
</html>
